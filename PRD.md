# FlowState 需求规格说明书 (PRD)

## 1. 项目背景
FlowState 是一款集成了习惯追踪 (Habit Tracking)、智能日历 (Smart Calendar)、数据分析 (Analytics) 和社区交流 (Community) 的全方位生产力工具。其目标是帮助用户通过可视化和结构化的方式，进入“心流”状态，提升深度工作效率。

## 2. 核心功能需求

### 2.1 习惯打卡模块 (Habit System)
- **目标**: 提供多维度的习惯追踪。
- **功能点**:
    - **定量记录**: 如“喝水 2.5L”，支持增量打卡。
    - **定时任务**: 如“深度工作 4小时”，支持计时器联动。
    - **状态标记**: 如“冥想”，一键完成。
    - **Streak 追踪**: 自动计算并展示每个习惯的连续达成天数。

### 2.2 智能时间轴日历 (Time-Blocking Calendar)
- **目标**: 可视化管理每日时间分配。
- **功能点**:
    - **24h 时间轴**: 展示所有时间分配记录。
    - **交互式编辑**: 支持拖拽移动任务块、垂直缩放调整时长。
    - **冲突显示**: 自动处理并排展示重叠的日程。
    - **实时标注**: 当前时间线辅助用户对齐进度。

### 2.3 专注模式 (Deep Focus Mode)
- **目标**: 减少干扰，记录深度专注时长。
- **功能点**:
    - **沉浸式倒计时**: 全屏专注 UI。
    - **自动归档**: 专注结束后自动生成一份日历时间记录并同步至数据库。

### 2.4 数据分析仪表盘 (Analytics Dashboard)
- **目标**: 反馈生产力状态，指导计划调整。
- **功能点**:
    - **时间分配环形图**: 深度工作、健康、行政等比例分析。
    - **一致性柱状图**: 最近一周或一月的习惯坚持趋势。
    - **成就总结**: 识别最佳表现日并生成分析报告。

### 2.5 社区互动流 (Social & Community)
- **目标**: 通过社交契约和相互激励提升动力。
- **功能点**:
    - **打卡动态**: 发布带有完成度徽章或桌面的动态。
    - **点赞互动**: 社区点赞及回复。
    - **个人主页**: 展示公开的习惯徽章和成就。

---

## 3. 技术方案 (System Architecture)
- **架构**: 前后端分离 (Micro-services logic within Docker)
- **前端**: React 19, TypeScript, Tailwind CSS, Recharts
- **后端**: Node.js (Express), TypeScript, Prisma ORM
- **数据库**: PostgreSQL
- **部署**: Docker Compose 容器化部署

---

## 4. 后续开发路线图 (Roadmap)
1. **Milestone 1**: 数据库迁移与 CRUD 接口（习惯与日历记录）。
2. **Milestone 2**: 前端静态数据替换为 API 实时数据。
3. **Milestone 3**: 接入 Gemini AI 实现智能任务建议与分析。
4. **Milestone 4**: 完善社区系统与实时聊天功能。
